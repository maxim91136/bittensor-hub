# Release v1.0.0-rc.14

**Release Date:** November 30, 2025

## üéØ Headline Feature: Block Time & Staking APR Metrics

Two new dashboard kachels providing real-time network performance and staking yield metrics with transparent calculation methodology.

## ‚ú® What's New

### Block Time Kachel
- **Real-time block interval**: Shows average seconds between blocks
- **Target comparison**: Bittensor targets 12.0s block time
- **Status indicator**: normal / slow / congested based on deviation
- **Transparent calculation**: Tooltip shows formula and data source

### Avg. Staking APR Kachel
- **Stake-weighted average**: Realistic network-wide APR representation
- **Formula**: `Œ£(APR √ó stake) / Œ£(stake)` across top 50 validators
- **Per-validator APR**: `(daily_return √ó 365 / stake) √ó 100`
- **Tooltip details**: Simple avg, min/max range, validator count

### Backend Infrastructure
- `fetch_block_time.py` - Calculates avg block time from 200 blocks
- `fetch_staking_apy.py` - Calculates stake-weighted APR from validators
- `fetch-block-time.yml` - Hourly workflow at :49
- `fetch-staking-apy.yml` - Hourly workflow at :19
- `/api/block_time` - Cloudflare Pages function serving block time data
- `/api/staking_apy` - Cloudflare Pages function serving APR data

## üîÑ Changes

### UI Improvements
- **Renamed**: "Block" ‚Üí "Block Height" for clarity
- **New kachels**: Block Time and Avg. Staking APR added to stats grid

### Workflow Schedule Optimization
- Fixed schedule conflict: `fetch-staking-apy` moved from `:59` to `:19`
- All hourly workflows now have 10-minute spacing

## üìä Data Sources

| Endpoint | Source | Refresh | Sample Size |
|----------|--------|---------|-------------|
| `/api/block_time` | Taostats Block API | Hourly @ :49 | 200 blocks (~40 min) |
| `/api/staking_apy` | Taostats dTao Validator API | Hourly @ :19 | 50 validators |

## üîß Technical Details

### Block Time API Response
```json
{
  "avg_block_time": 12.0,
  "target_block_time": 12.0,
  "deviation": 0.0,
  "status": "normal",
  "blocks_analyzed": 200,
  "_source": "taostats",
  "_timestamp": "2025-11-30T20:00:00+00:00"
}
```

### Staking APR API Response
```json
{
  "avg_apr": 42.27,
  "simple_avg_apr": 43.18,
  "min_apr": 22.29,
  "max_apr": 77.98,
  "validators_analyzed": 50,
  "top_validator": {
    "name": "tao.bot",
    "dominance": "13.45"
  },
  "_source": "taostats",
  "_timestamp": "2025-11-30T20:08:50+00:00"
}
```

### Workflow Schedule (Complete)
```
Hourly:
:05 - fetch-price-history.yml
:19 - fetch-staking-apy.yml (NEW)
:29 - fetch-top-validators.yml
:39 - fetch-top-wallets.yml
:49 - fetch-block-time.yml (NEW)
:59 - fetch-top-subnets.yml

Every 10 minutes:
:03,:13,:23,:33,:43,:53 - publish-taostats.yml
:07,:17,:27,:37,:47,:57 - compute-taostats-aggregates.yml
:11,:21,:31,:41,:51 - publish-network.yml

Every 3 hours:
:01 - backup-taostats-r2.yml
:04 - backup-network-history-r2.yml
:07 - backup-issuance-history-r2.yml
:10 - publish-ath-athl.yml
```

## üìà Current Metrics (as of release)

| Metric | Value | Notes |
|--------|-------|-------|
| Block Time | 12.0s | Perfect - exactly on target |
| Avg. Staking APR | 42.27% | Stake-weighted across top 50 |
| Simple Avg APR | 43.18% | Unweighted average |
| APR Range | 22.29% - 77.98% | Min to max across validators |

## üêõ Bug Fixes

- **APR Calculation**: Fixed to use `nominator_return_per_day` field (dTao API doesn't expose direct APR)
- **Workflow Conflict**: Resolved `:59` collision between staking APY and top subnets workflows

## üìù Commits in this Release

```
cf15acd feat: Add Block Time and Avg Staking APR kachels
e081e2f fix: Move fetch-staking-apy from :59 to :19 to avoid conflict
65d3866 feat: Use stake-weighted average for APR calculation
4a37f4b fix: Calculate APR from nominator_return_per_day and stake
d38a987 fix: Try alternative APR field names
80d4a36 fix: Increase APR sanity check to 1000% and add debug logging
e3b9f35 fix: Remove invalid order parameter from validator API
85f1069 feat: Add staking APY monitoring backend
28eebc1 chore: Use 200 blocks for block time calculation
559c5d4 feat: Paginate block API to fetch 500 blocks
5faab4b chore: Increase block sample size to 500
de1baae fix: Use correct KV binding for block_time endpoint
ae14747 fix: Correct block API endpoint URL
496f494 feat: Add block time monitoring backend
27a7d3e chore: Unify workflow names
```

---

**Full Changelog**: [v1.0.0-rc.12...v1.0.0-rc.14](https://github.com/maxim91136/bittensor-labs/compare/v1.0.0-rc.12...v1.0.0-rc.14)
