```markdown
# v1.0.0-rc.4 (Release Candidate)

## Highlights
- Hardened ATH/ATL publishing and Worker safety improvements.
- Worker: KV-first read, new health endpoint, safe publish behavior.
- Backups: `issuance_history` collection run every 6 hours; opt‑in R2 uploads with Cloudflare API fallback when R2 credentials are not provided.
- CI: Worker deploy workflow hardened; uploads and backups safe-guarded with `ENABLE_R2` guard.
- Frontend: emission and circulating supply exact values presented with thousands separators and two decimals; halving pill tooltip consolidated and uses arrow notation.

## Added
- `upload_backup_r2.py` enhanced to prefer S3 (R2) when keys are present and fall back to Cloudflare HTTP API when not. Uploads are opt‑in via `ENABLE_R2`.
- `fetch_issuance_history.py` workflow script that writes timestamped `issuance_history-YYYYMMDDTHHMMSSZ.json` files.
- Worker health endpoint at `/api/ath-atl/health` for smoke checks.

## Changed
- Backups: the scheduled backup workflow was narrowed to only collect `issuance_history` (every 6 hours). Uploads are opt‑in and safe.
- Worker: prefer KV reads first and avoid accidental writes; improved error handling and safe publishing.
- Frontend: `script.js` formatting and tooltip changes — exact values use thousands separators and two decimals; emission display uses rounded-up-to-2-decimals for shown value while tooltip shows exact; halving tooltip uses arrow notation and combined last-reached line.

## Fixed
- CI/Deploy: adjusted Node/Wrangler usage in CI for reliable worker deploys and fixed earlier workflow issues causing occasional deploy failures.

## Notes
- Required secrets for optional R2 uploads (only needed if `ENABLE_R2=true`): `R2_ENDPOINT`, `R2_BUCKET`, `R2_ACCESS_KEY_ID`, `R2_SECRET_ACCESS_KEY`, plus the repo's existing Cloudflare secrets.
- Backup workflow remains scheduled via GitHub Actions cron (UTC); if you need stricter SLA for runs consider adding an external scheduler to dispatch `workflow_dispatch` as a fallback.

---

Released by: `main` branch; Tag: `v1.0.0-rc.4`

```
